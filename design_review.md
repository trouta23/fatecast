FateCast: Feature Enhancements & Roadmap1. Gameplay Mechanics: Advanced Syntax SupportTo support modern TTRPG systems (e.g., D&D 5e, Pathfinder, Shadowrun), the parsing engine must evolve beyond simple arithmetic to support set operations and conditional logic.1.1 Keep/Drop Mechanics (Advantage/Disadvantage)Requirement: Allow players to roll a pool of dice and select a subset of results.Syntax:khN (Keep Highest N): 2d20kh1 (Standard "Advantage").klN (Keep Lowest N): 2d20kl1 (Standard "Disadvantage").dhN / dlN (Drop Highest/Lowest): 4d6dl1 (Stat generation).Implementation Note: This requires sorting the results array before summation.31.2 Exploding Dice (Aces)Requirement: If a die rolls its maximum value, roll it again and add the new value to the total.Syntax: X! (e.g., 1d6!).Safety Guard: Must implement a recursion limit (e.g., max 100 re-rolls) to prevent infinite loops if a user uses a custom "d1" or modded die.51.3 Target Numbers (Success Counting)Requirement: Instead of summing values, count how many dice meet a condition.Syntax: >N, <N.Example: 10d6>4 (Roll 10 dice; count dice showing 5 or 6).Use Case: Systems like Shadowrun or World of Darkness.62. User Experience (UX): Persistence & ConfigurationTransition the tool from a stateless script to a configurable application that remembers the user.2.1 Macro SystemGoal: Reduce repetitive typing for common rolls (attacks, saves).Command: save <name> <notation>Usage:Input: save fireball 8d6Execution: roll fireballStorage: Save to a local JSON file.72.2 Configuration Management (rc files)Goal: Allow users to set global preferences.File Path: ~/.fatecastrc or ~/.config/fatecast/config.json.7Settings:defaultSystem: "dnd5e" (affects default crit ranges).verbose: true/false (always show individual die results).color: true/false.3. System Integration & AccessibilityEnhance the tool's ability to function within a larger Unix pipeline or automated environment.3.1 Machine-Readable OutputFlag: --jsonGoal: Output purely structured data for consumption by other tools (e.g., Discord bots, VTT scripts).8Schema:JSON{
  "timestamp": "2023-10-27T10:00:00Z",
  "notation": "2d20kh1+5",
  "total": 19,
  "details": {
    "dice": [1, 2],
    "dropped": [2],
    "modifier": 5
  }
}
3.2 Accessibility ComplianceFlag: --no-colorEnvironment Variable: Respect NO_COLOR to disable ANSI codes for users with visual impairments or simple logging requirements.84. Technical Stability & SecurityImplement "guard rails" to ensure the application remains stable under stress or malicious input.4.1 Input Caps (Resource Exhaustion Prevention)Constraint: Prevent users from allocating excessive memory or CPU cycles.Limits:Max Dice Quantity: 500 (Prevents massive array allocation).Max Sides: 1000 (Practical limit for simulation).Max Recursion: 50 (For exploding dice).Rationale: Prevents process hanging and MAX_SAFE_INTEGER overflows.104.2 ReDoS ProtectionStrategy: Strict input truncation.Action: Truncate all input strings to 100 characters before passing them to the Regex/Parser engine. This neutralizes "catastrophic backtracking" attacks found in complex regex patterns.125. Interactive Mode EnhancementsUpgrade the REPL (Read-Eval-Print Loop) to feel like a native shell.5.1 Inquirer.js IntegrationReplace: Node.js native readline.Adopt: Inquirer.js.13Benefits:Native list selection for saved Macros.Better handling of asynchronous prompts.5.2 Command HistoryFeature: Pressing Up Arrow cycles through previous rolls in the current session.Implementation: Maintain a circular buffer of the last 50 commands in memory.145.3 Tab CompletionFeature: Pressing Tab auto-completes known keywords (e.g., save, roll, help) and defined Macro names.